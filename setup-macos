#!/usr/bin/env bash
exec ./setup-generic
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew install --formula <<< brew.formula
brew install --cask <<< brew.casks
{
  set -e
  wget https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-sdk-379.0.0-darwin-arm.tar.gz
  tar xf google-cloud-sdk-379.0.0-darwin-arm.tar.gz
  ./google-cloud-sdk/install.sh
  set +e
}
{
  set -e
  curl -L --output - https://github.com/codefresh-io/cli-v2/releases/latest/download/cf-darwin-amd64.tar.gz \
    | tar zx
  install ./cf-darwin-amd64 /usr/local/bin/cf
  cf version
  set +e
}
